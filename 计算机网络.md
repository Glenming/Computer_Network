#  第四章 网络层

##  1.  IP地址与硬件地址之间通信

1. ？ 主机H1与另一个网上的主机H2通信，主机H1是否知道H2跟他不在一个网络下，
2. ？ 在同一个局域网下，是不是每个主机都知道其他主机的IP地址；是不是想要建立通信，就可以获取该设备的IP地址(尽管可能不在同一个局域网下)

#  第五章 运输层

##  1. 三报文握手相关内容

三次握手是建立一个TCP连接的时，需要客户与服务器之间交换三个TCP报文段。进行三报文段握手主要就是为了确认双方的发送能力和接受能力是否正常、制定自己的初始化序列号为后面的可靠传输做准备。

实质上就是：连接服务器指定端口、建立TCP连接、同步连接双方序列号和确认号、交换TCP窗口信息。

SYN：同步位	seq：序号	确认：ACK

**初始状态：**刚开始客户端处于Close(关闭)状态，服务器处于Listen(监听)状态。

> **第一次握手：**客户端向服务器端发送连接请求报文，同步位SYN=1，初始化序列号seq=x，发送完成后客户端处于                                 SYN-SEND(同步已发送状态)。         *（此报文段不能携带数据，消耗一个序号）*
>
> **第二次握手：**服务器收到客户端发送的连接请求报文后，若服务器同意连接，则向客户端发送确认连接报文，报文中                         同步位SYN=1，确认ACK=1，确认号 ack=x+1，初始序列号seq=y，发送完成后服务器端处于SYN-RCVD(同步收到状态)。            *（此报文段不能携带数据，消耗一个序号）*    
>
> **第三次握手：**客户端收到服务器的确认连接报文后，向服务器发送确认报文段，报文中ACK=1，确认号 ack=y+1，                            序列号seq=x+1，发送完成后客户端处于ESTABLISHED(已建立连接状态) ，服务器收到报文后也处于ESTABLISHED(已建立连接状态) 此时双方建立TCP连接。 *（此报文段可以携带数据，不携带数据不消耗序号）*          

##  2. 四报文挥手

**数据传输结束后：**客户端和服务器都处于ESTABLISHED(连接已建立状态)

> **第一次挥手：**客户端向服务器发送TCP连接释放报文，报文中终止控制位FIN=1，序号seq=u，发送完成后客户端停止发送数据，                客户端进入FIN-WAIT1(终止等待状态1)，等待服务器确认。
>
> **第二次挥手：**服务器受到客户端发送的连接释放报文后，发送确认报文，报文中确认ACK=1，确认号ack=u+1，序号seq=v，             此时服务器进入CLOSE-WAIT(关闭等待)，此时客户端到服务器的连接释放，TCP连接处于半关闭状态，客户端仍可以收到服务器发送的数据。
>
> **第三次挥手：**当客户端收到服务器的确认报文后，进入FIN-WAIT2(终止等待状态2)，等待服务器发送连接释放报文；如果服务器没有要发送的数据，将会向客户端发送连接释放报文，报文中终止控制位FIN=1，确认ACK=1，序号seq=w，确认号ack=u+1，此时服务器进入LAST-ACK(最后确认状态)，等待客户端确认。
>
> **第四次挥手：**当客户端收到服务器连接释放报文，发送确认报文，报文中确认ACK=1，序号seq=u+1，确认号ack=w+1，客户端发送完成后进入TIME-WAIT(时间等待状态)，需要等待2MSL时间后进入关闭状态。当服务器收到确认报文后，将进入关闭状态。

##  3. TCP与UDP区别

- **UDP特点：**(1)无连接的	(2)尽最大努力交付的	(3)面向报文	(4)无拥塞控制	(5)一对一、一对多、多对一、多对多交互通信	     (6)首部开销小

- **TCP特点：**(1)面相连接	(2)每一条TCP连接只能是点对点的	(3)提供可靠的交付服务	(4)提供全双工	(5)面向字节流

##  4. TCP流量控制与拥塞控制

- 流量控制是点对点的通信量控制，接收端控制发送端的发送速率不要太快，使接收端来得及接收。

- 在某段时间内，对网络资源的需求超过了该资源的可用部分，网络的性能就会下降，这种情况称为拥塞；

  拥塞控制是个全局性的过程，其目的就是为了防止过多的数据注入到网络中，这样就使得网络中的路由器或链路不至过载。

##  5. TCP拥塞控制四种算法

慢开始、拥塞避免、快重传、快恢复

  
